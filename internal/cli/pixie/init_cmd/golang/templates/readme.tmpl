# {{.ProjectName}}

A Go backend system generated by cli_pixie.

## Prerequisites

- Go 1.24 or later
- PostgreSQL 16+
- Redis 7+
- Docker (optional, for containerized development)

## Quick Start

### 1. Start Infrastructure (Docker)

```bash
docker-compose -f misc/dockerfiles/docker-compose.yaml up -d
```

### 2. Configure Environment

Copy the example environment file and update values:

```bash
cp .env.example .env
# Edit .env with your configuration
```

### 3. Install Dependencies

```bash
go mod tidy
```

### 4. Run Migrations

Migrations are automatically applied on startup.

### 5. Run a Microservice

```bash
# Run authentication microservice
make run MS=authentication

# Or directly with go
go run ./cmd/ms/ms_authentication/application.go --config=./misc/configs/ms_authentication.json
```

## Project Structure

```
├── cmd/
│   └── ms/                    # Microservice entry points
│       ├── ms_authentication/
│       ├── ms_notifications/
│       └── ms_{{.ProjectMS}}/
├── internal/
│   ├── ms/                    # Microservice implementations
│   ├── domains/               # Domain logic (business, data layers)
│   └── e2e_tests/             # End-to-end tests
├── pkg/
│   └── models/                # Shared models
├── bundles/                   # DI bundles
├── infra/
│   ├── di/                    # Dependency injection tokens
│   ├── gates/                 # Authentication gates
│   └── session_manager/       # JWT/Session management
└── misc/
    ├── configs/               # Configuration files
    └── dockerfiles/           # Docker configuration
```

## Available Commands

```bash
# Build all microservices
make build

# Run a specific microservice
make run MS=<microservice_name>

# Run tests
make test

# Run tests with coverage
make test-coverage

# Format code
make fmt

# Lint code
make lint

# Clean build artifacts
make clean
```

## Configuration

Each microservice has its own configuration file in `misc/configs/`:

- `ms_authentication.json` - Authentication service config
- `ms_notifications.json` - Notifications service config
- `ms_{{.ProjectMS}}.json` - Main project service config

## API Endpoints

Each microservice exposes:

- `GET /health` - Health check
- `GET /metrics` - Prometheus metrics

## Development

### Adding a New Domain

1. Create domain structure in `internal/domains/<domain_name>/`
2. Add DI tokens in `infra/di/injection_tokens.go`
3. Register domain in the microservice's registry

### Running Tests

```bash
# All tests
go test ./...

# Specific package
go test ./internal/domains/authentication/...

# E2E tests
go test ./internal/e2e_tests/...
```

## License

Private - All rights reserved.
